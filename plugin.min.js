/* eslint-disable */
/* prettier-ignore */
!function(){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("quick_insert_resource",function(e){e.on("init",function(){e.ui.registry.addIcon("quick_insert_resource",'\n        <svg t="1563070372451" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3033" width="16" height="16"><path d="M164.6 147a87.6 87.6 0 1 0 87.6 87.6 87.7 87.7 0 0 0-87.6-87.6z" fill="#F9DB91" p-id="3034"></path><path d="M358.81 173.43l588.19 0 0 122.25-588.19 0 0-122.25Z" fill="#F9DB91" p-id="3035"></path><path d="M164.6 424.4a87.6 87.6 0 1 0 87.6 87.6 87.7 87.7 0 0 0-87.6-87.6z" fill="#AEF0FF" p-id="3036"></path><path d="M358.81 450.87l588.19 0 0 122.25-588.19 0 0-122.25Z" fill="#AEF0FF" p-id="3037"></path><path d="M164.6 701.85a87.6 87.6 0 1 0 87.6 87.6 87.7 87.7 0 0 0-87.6-87.6z" fill="#EF6A6A" p-id="3038"></path><path d="M358.81 728.32l588.19 0 0 122.25-588.19 0 0-122.25Z" fill="#EF6A6A" p-id="3039"></path><path d="M164.6 134a100.6 100.6 0 1 0 100.6 100.6A100.6 100.6 0 0 0 164.6 134z m0 175.2a74.6 74.6 0 1 1 74.6-74.6 74.69 74.69 0 0 1-74.6 74.55zM930 160.43H375.81a30.09 30.09 0 0 0-30 30v88.25a30.09 30.09 0 0 0 30 30H930a30.09 30.09 0 0 0 30-30v-88.25a30.09 30.09 0 0 0-30-30z m4 118.25a4.1 4.1 0 0 1-4 4H375.81a4.1 4.1 0 0 1-4-4v-88.25a4.1 4.1 0 0 1 4-4H930a4.1 4.1 0 0 1 4 4zM164.6 411.4A100.6 100.6 0 1 0 265.2 512a100.6 100.6 0 0 0-100.6-100.6z m0 175.2a74.6 74.6 0 1 1 74.6-74.6 74.69 74.69 0 0 1-74.6 74.6zM930 437.87H375.81a30.09 30.09 0 0 0-30 30v88.25a30.09 30.09 0 0 0 30 30H930a30.09 30.09 0 0 0 30-30v-88.25a30.09 30.09 0 0 0-30-30z m4 118.25a4.1 4.1 0 0 1-4 4H375.81a4.1 4.1 0 0 1-4-4v-88.25a4.1 4.1 0 0 1 4-4H930a4.1 4.1 0 0 1 4 4zM164.6 688.85a100.6 100.6 0 1 0 100.6 100.6 100.6 100.6 0 0 0-100.6-100.6z m0 175.2a74.6 74.6 0 1 1 74.6-74.6A74.69 74.69 0 0 1 164.6 864zM930 715.32H375.81a30.09 30.09 0 0 0-30 30v88.25a30.09 30.09 0 0 0 30 30H930a30.09 30.09 0 0 0 30-30v-88.25a30.09 30.09 0 0 0-30-30z m4 118.25a4.1 4.1 0 0 1-4 4H375.81a4.1 4.1 0 0 1-4-4v-88.25a4.1 4.1 0 0 1 4-4H930a4.1 4.1 0 0 1 4 4z" fill="#512C56" p-id="3040"></path></svg>\n        ')});var a=function(e){return{title:"快速插入本书资源索引",body:{type:"panel",items:e},buttons:[{type:"custom",name:"pre-page",text:"前一页",disabled:!1},{type:"custom",name:"next-page",text:"下一页",disabled:!1},{type:"custom",name:"insert",text:"插入",disabled:!1}],onAction:(e,o)=>{if("pre-page"===o.name){t-=20;var i="/api/v1/books/"+$("#book").val()+"/resources?sort=seq&order=asc&offset="+t;$.getJSON(i,function(t,o,i){var r=[];t.rows.forEach(e=>{r.push({type:"checkbox",name:"<a href="+e.url+">"+e.title+"</a>",label:e.seq+" "+e.title,value:e.url})}),e.redial(a(r))})}if("next-page"===o.name){t+=20;i="/api/v1/books/"+$("#book").val()+"/resources?sort=seq&order=asc&offset="+t;$.getJSON(i,function(t,o,i){var r=[];t.rows.forEach(e=>{r.push({type:"checkbox",name:"<a href="+e.absoluteURL+">"+e.title+"</a>",label:e.seq+" "+e.title,value:e.absoluteURL})}),e.redial(a(r))})}if("insert"===o.name){var r=e.getData();for(var s in r)!0===r[s]&&tinymce.activeEditor.execCommand("mceInsertContent",!1,"<p>"+s+"</p>");e.close()}}}},t=0;e.ui.registry.addButton("quick_insert_resource",{tooltip:"插入资源列表",icon:"quick_insert_resource",onAction:function(){var o="/api/v1/books/"+$("#book").val()+"/resources?sort=seq&order=asc&offset="+t;$.getJSON(o,function(t,o,i){var r=[];t.rows.forEach(e=>{r.push({type:"checkbox",name:"<a href="+e.absoluteURL+">"+e.title+"</a>",label:e.seq+" "+e.title,value:e.absoluteURL})}),e.windowManager.open(a(r))})}})})}();
